üìë Documento 1: Arquitetura de Dados (Data Schema & Core Entities)
Projeto: TorneioHub ATH (Advanced Tournament Hub)

Status: Vers√£o 1.0 - Consolidado

1. Vis√£o Geral da Arquitetura
A arquitetura √© baseada em um modelo H√≠brido Relacional-Documental. Usaremos tabelas estruturadas para o fluxo principal e campos metadata (JSONB) para a flexibilidade de esportes e regras personalizadas.

2. Diagrama de Entidades Principais
A. Core: O Evento e as Competi√ß√µes
Organization: (Dono do ambiente, ex: "Condom√≠nio Solar", "Escola Estadual").

Event (Master): O "guarda-chuva" (ex: "Olimp√≠adas de Inverno 2026").

Tournament (Modalidade): Cada jogo dentro do evento.

win_condition_type: (Maior Pontua√ß√£o, Menor Tempo, Pontua√ß√£o Alvo).

win_condition_value: (Ex: 25 para v√¥lei, 1 para vit√≥ria simples).

metadata: Configura√ß√µes espec√≠ficas do esporte (ex: "Dura√ß√£o do tempo: 15min").

B. Participantes (O Ator Universal)
Participant:

type: (INDIVIDUAL | TEAM).

status: (ACTIVE | DISQUALIFIED | INCOMPLETE).

metadata: Campos extras (camisa, posi√ß√£o, n√≠vel, CPF).

Team_Members: Tabela de liga√ß√£o para compor times a partir de usu√°rios/atletas.

C. O Motor de Fases (Workflow)
Phase: Uma etapa do torneio.

type: (ROUND_ROBIN | SINGLE_ELIMINATION | DOUBLE_ELIMINATION | CUSTOM).

order: Sequ√™ncia da fase (1¬™, 2¬™...).

status: (PENDING | ACTIVE | COMPLETED).

transition_strategy: (AUTO | MANUAL).

Transition_Rules: Define como os participantes "pulam" de uma fase para outra (ex: Top 2 de cada grupo -> Oitavas).

D. A Partida (Match)
Match:

status: (SCHEDULED | LIVE | FINISHED | CANCELLED).

score_a / score_b: Decimais para suportar qualquer m√©trica.

override_log: JSON registrando quem for√ßou um resultado ou in√≠cio irregular.

3. L√≥gica de Resili√™ncia (Os "Overrides")
Para garantir que o sistema n√£o trave, implementaremos o Pattern de Bypass:

Validation Engine: Antes de cada partida ou troca de fase, o sistema roda um CheckRules().

Alert System: Se um time de futebol tem 4 jogadores (m√≠nimo era 5), o sistema emite um Warning.

Organizer Key: O organizador possui uma permiss√£o de FORCE_EXECUTE. Ao acionar, o sistema executa a a√ß√£o e grava no audit_log: "Fase encerrada manualmente por Eduardo em 26/02/2026 - Motivo: Time desistente".

4. Estrutura de Metadados (Exemplo JSONB)
Para um torneio de T√™nis de Mesa, o campo metadata da partida seria:

JSON
{
  "sets": [
    {"a": 11, "b": 8},
    {"a": 11, "b": 13},
    {"a": 11, "b": 5}
  ],
  "equipment_checked": true
}
